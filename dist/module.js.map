{"version":3,"sources":["../src/module.js"],"names":["MetricsPanelCtrl","$","_","moment","d3","appEvents","MultistatPanelCtrl","$scope","$injector","panelDefaults","panel","elem","ctrl","defaults","events","on","onRender","bind","onDataReceived","onDataError","onInitEditMode","className","id","err","seriesList","data","displayStatusMessage","status","statusText","metricNames","sortDirections","aggregations","fontSizes","valuePositions","addEditorTab","cols","length","rows","type","columns","i","text","cols0","concat","render","emit","dateTimeCol","$title","closest","find","$maxDate","append","children","last","ShowDate","maxDate","dd","add","TZOffsetHours","DateFormat","toUpperCase","fromNow","show","format","hide","msg","html","labelCol","valueCol","sortCol","groupCol","DateTimeColName","LabelColName","ValueColName","SortColName","GroupColName","LabelNameFilter","regex","RegExp","matchingRows","label","match","push","Aggregate","oo","nest","key","d","rollup","entries","forEach","x","value","Object","values","assign","mean","Array","from","max","min","groupNameOffset","ShowGroupLabels","Number","GroupLabelFontSize","replace","groupedRows","GroupNameFilter","regexGroupRows","matchingGroups","groupName","groupSortString","GroupSortString","sort","a","b","aPos","search","bPos","localeCompare","SortDirection","ascending","y","comp","$container","h","height","w","width","buildDateHtml","horizontal","Horizontal","labelMargin","isNumeric","LabelMargin","lowSideMargin","LowSideMargin","highSideMargin","HighSideMargin","svg","select","selectAll","interrupt","barPadding","BarPadding","baseLineValue","BaseLineValue","minLineValue","MinLineValue","maxLineValue","MaxLineValue","highBarColor","HighBarColor","lowBarColor","LowBarColor","highLimitValue","HighLimitValue","HighLimitBarColor","HighLimitBarFlashColor","HighLimitBarFlashTimeout","recolorHighLimitBar","RecolorHighLimitBar","lowLimitValue","LowLimitValue","LowLimitBarColor","LowLimitBarFlashColor","LowLimitBarFlashTimeout","recolorLowLimitBar","RecolorLowLimitBar","flashHighLimitBar","FlashHighLimitBar","flashLowLimitBar","FlashLowLimitBar","showTooltips","ShowTooltips","TooltipDateFormat","ValueDecimals","OddRowColor","EvenRowColor","GroupCols","GroupGap","ScaleFactor","LabelColor","ValuePosition","minValue","maxValue","attr","style","tooltipShow","c","tooltipDiv","transition","duration","cc","toFixed","event","pageX","pageY","tooltipHide","scaleAndClipValue","val","plotGroupHorizontal","numRows","left","hh","dh","GroupLabelColor","labels","map","Math","random","toString","substr","labelScale","scaleBand","domain","rangeRound","paddingInner","paddingOuter","stripedata","range","stripeScale","oddeven","enter","step","gg","ShowValues","maxValueWidth","bandwidth","ValueFontSize","ValueColor","each","thisWidth","getComputedTextLength","ShowLabels","maxLabelWidth","labelAngle","LableAngle","LabelFontSize","OutOfRangeLabelColor","bbox","getBBox","s","sin","PI","cos","abs","valueScale","scaleLinear","nice","vLine","color","ShowBaseLine","BaseLineColor","ShowMaxLine","MaxLineColor","ShowMinLine","MinLineColor","ShowHighLimitLine","HighLimitLineColor","ShowLowLimitLine","LowLimitLineColor","classed","g","ggHighSide","call","axisTop","HighAxisColor","ggLowSide","axisBottom","LowAxisColor","gcols","dw","pointsPerRow","rr","floor","u","totalPoints","rowOverheadHeight","rowHeight","ceil","nn","ii","plotGroupVertical","maxValueHeight","thisHeight","maxLabelHeight","hLine","axisLeft","tickSizeInner","tickSizeOuter","ticks","axisRight","pointsPerCol","colOverheadWidth","colWidth","ww","pulseHigh","highFlashRects","_groups","highRepeat","active","pulseLow","lowFlashRects","lowRepeat","renderingCompleted","refresh","scope","attrs","templateUrl"],"mappings":"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","file":"module.js","sourcesContent":["/*jshint esversion: 6 */\r\nimport { MetricsPanelCtrl } from 'app/plugins/sdk';\r\nimport $ from 'jquery';\r\nimport 'jquery.flot';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\nimport \"./css/multistat-panel.css!\";\r\nimport d3 from './external/d3';\r\nimport {appEvents} from 'app/core/core';\r\n\r\n\r\n\r\n\r\nclass MultistatPanelCtrl extends MetricsPanelCtrl {\r\n\r\n    /** @ngInject */\r\n    constructor($scope, $injector) {\r\n        super($scope, $injector);\r\n\r\n        var panelDefaults = {\r\n\t\t\t\"BarPadding\": 10,\r\n\t\t\t\"BaseLineColor\": \"#ff0000\",\r\n\t\t\t\"BaseLineValue\": 0,\r\n\t\t\t\"DateTimeColName\": \"date\",\r\n\t\t\t\"DateFormat\": \"YYYY-MM-DD HH:mm:ss\",\r\n\t\t\t\"TooltipDateFormat\": \"YYYY-MM-DD HH:mm:ss\",\r\n\t\t\t\"FlashHighLimitBar\": false,\r\n\t\t\t\"FlashLowLimitBar\": false,\r\n\t\t\t\"HighAxisColor\": \"#ffffff\",\r\n\t\t\t\"HighBarColor\": \"rgb(120, 128, 0)\",\r\n\t\t\t\"HighLimitBarColor\": \"#ff0000\",\r\n\t\t\t\"HighLimitBarFlashColor\": \"#ffa500\",\r\n\t\t\t\"HighLimitBarFlashTimeout\": 1000,\r\n\t\t\t\"HighLimitLineColor\": \"#ff0000\",\r\n\t\t\t\"HighLimitValue\": 0.33,\r\n\t\t\t\"HighSideMargin\": 22,\r\n\t\t\t\"Horizontal\": false,\r\n\t\t\t\"LabelColName\": \"sensor\",\r\n\t\t\t\"LabelNameFilter\": \"\",\r\n\t\t\t\"LabelColor\": \"#ffffff\",\r\n\t\t\t\"OutOfRangeLabelColor\": \"#ffffff\",\r\n\t\t\t\"GroupLabelColor\": \"#ffffff\",\r\n\t\t\t\"LabelFontSize\": \"100%\",\r\n\t\t\t\"GroupLabelFontSize\": \"200%\",\r\n\t\t\t\"GroupGap\": 5,\r\n\t\t\t\"LabelMargin\": null,\r\n\t\t\t\"LowAxisColor\": \"#ffffff\",\r\n\t\t\t\"LowBarColor\": \"teal\",\r\n\t\t\t\"LowLimitBarColor\": \"#ff0000\",\r\n\t\t\t\"LowLimitBarFlashColor\": \"#ffa500\",\r\n\t\t\t\"LowLimitBarFlashTimeout\": 200,\r\n\t\t\t\"LowLimitLineColor\": \"#ff0000\",\r\n\t\t\t\"LowLimitValue\": null,\r\n\t\t\t\"LowSideMargin\": 22,\r\n\t\t\t\"MaxLineColor\": \"rgb(74, 232, 12)\",\r\n\t\t\t\"MaxLineValue\": 1,\r\n\t\t\t\"MinLineValue\": 0,\r\n\t\t\t\"RecolorHighLimitBar\": true,\r\n\t\t\t\"RecolorLowLimitBar\": false,\r\n\t\t\t\"ShowBaseLine\": true,\r\n\t\t\t\"ShowDate\": false,\r\n\t\t\t\"Aggregate\": \"last\",\r\n\t\t\t\"ShowHighLimitLine\": true,\r\n\t\t\t\"ShowLabels\": true,\r\n\t\t\t\"ShowGroupLabels\": true,\r\n\t\t\t\"ShowLeftAxis\": true,\r\n\t\t\t\"ShowLowLimitLine\": false,\r\n\t\t\t\"ShowMaxLine\": false,\r\n\t\t\t\"ShowMinLine\": true,\r\n\t\t\t\"ShowRightAxis\": true,\r\n\t\t\t\"ShowTooltips\": true,\r\n\t\t\t\"ShowValues\": true,\r\n\t\t\t\"SortColName\": \"value\",\r\n\t\t\t\"SortDirection\": \"ascending\",\r\n\t\t\t\"TZOffsetHours\": 0,\r\n\t\t\t\"ValueColName\": \"value\",\r\n\t\t\t\"ValueDecimals\": 2,\r\n\t\t\t\"ValueColor\": \"#ffffff\",\r\n\t\t\t\"ValueFontSize\": \"100%\",\r\n\t\t\t\"OddRowColor\": \"rgba(33, 33, 34, 0.92)\",\r\n\t\t\t\"EvenRowColor\": \"rgba(61, 61, 64, 0.78)\",\r\n\t\t\t\"GroupSortString\": \"\",\r\n\t\t\t\"GroupCols\": 0,\r\n\t\t\t\"GroupNameFilter\": \"\",\r\n\t\t\t\"ScaleFactor\": 1.0,\r\n\t\t\t\"ValuePosition\": \"top\",\r\n\t\t\t\"LableAngle\": 0\r\n\t\t\t};\r\n\r\n        var panel = {};\r\n        var elem = {};\r\n        var ctrl = {};\r\n\r\n        _.defaults(this.panel, panelDefaults);\r\n\r\n        this.events.on('render', this.onRender.bind(this));\r\n        this.events.on('data-received', this.onDataReceived.bind(this));\r\n        this.events.on('data-error', this.onDataError.bind(this));\r\n        this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\r\n\r\n\t\tthis.className = 'michaeldmoore-multistat-panel-' + this.panel.id;\r\n\t\t//this.svg = d3.select('.' + this.className).append('svg');\t\r\n    }\r\n\r\n    onDataError(err) {\r\n        this.seriesList = [];\r\n\t\tthis.data = [];\r\n\t\tthis.displayStatusMessage(\"Query failure, Status=\" + err.status + \", \" + err.statusText);\r\n    }\r\n\r\n    onInitEditMode() {\r\n\t\tthis.metricNames = ['min', 'max', 'avg', 'current', 'total', 'name', 'first', 'delta', 'diff', 'range'];\r\n\t\tthis.sortDirections = ['none', 'ascending', 'descending'];\r\n\t\tthis.aggregations = ['all', 'last', 'first', 'mean', 'max', 'min'];\r\n        this.fontSizes = ['20%', '30%', '50%', '70%', '80%', '100%', '110%', '120%', '150%', '170%', '200%', '250%', '300%', '350%', '400%'];\r\n\t\tthis.valuePositions = ['bar base', 'bar end', 'top'];\r\n        this.addEditorTab('Columns', 'public/plugins/michaeldmoore-multistat-panel/columns.html', 2);\r\n        this.addEditorTab('Layout', 'public/plugins/michaeldmoore-multistat-panel/layout.html', 3);\r\n        this.addEditorTab('Grouping', 'public/plugins/michaeldmoore-multistat-panel/grouping.html', 4);\r\n        this.addEditorTab('Options', 'public/plugins/michaeldmoore-multistat-panel/options.html', 5);\r\n        this.addEditorTab('Lines-and-Limits', 'public/plugins/michaeldmoore-multistat-panel/linesandlimits.html', 6);\r\n    }\r\n\r\n\r\n    onDataReceived(data) {\r\n\t\tthis.cols = [];\r\n\t\t//console.log('onDataReceived(' + JSON.stringify(data) + ')');\r\n\t\tif (data.length == 0){\r\n\t\t\tthis.displayStatusMessage(\"No data to show\");\r\n\t\t\tthis.data = data;\r\n\t\t\tthis.rows = null;\r\n\t\t}\r\n\t\telse if (data[0].type == \"table\" || data[0].columns){\r\n\t\t\tthis.data = data[0];\r\n\r\n\t\t\tfor(let i=0; i < this.data.columns.length; i++)\r\n\t\t\t\tthis.cols[i] = this.data.columns[i].text;\r\n\t\t\tthis.cols0 = [''].concat(this.cols);\r\n\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tappEvents.emit('alert-error', ['Non-Table type data received', 'Multistat does not support Time Series data sets']);\r\n\t\t}\r\n    }\r\n\r\n\tbuildDateHtml(dateTimeCol){\r\n\t\tvar $title = this.elem.closest('.panel-container').find('.panel-title');\r\n\t\tvar $maxDate = $title.find('span.michaeldmoore-multistat-panel-maxDate');\r\n\r\n\t\tif($maxDate.length == 0)\r\n\t\t\t$maxDate = $title.append('<span class=\"michaeldmoore-multistat-panel-maxDate\"/>').children().last();\r\n\r\n\t\tif (dateTimeCol != -1 && this.panel.ShowDate) {\r\n\t\t\tvar maxDate = this.rows[0][dateTimeCol];\r\n\r\n\t\t\tfor(let i = 1; i < this.rows.length; i++){\r\n\t\t\t\tif (maxDate < this.rows[i][dateTimeCol])\r\n\t\t\t\t\tmaxDate = this.rows[i][dateTimeCol];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar dd = moment(maxDate).add(this.panel.TZOffsetHours, 'h');\r\n\t\t\t\r\n\t\t\tif (this.panel.DateFormat.toUpperCase() == 'ELAPSED')\r\n\t\t\t\t$maxDate.text(dd.fromNow()).show();\r\n\t\t\telse\r\n\t\t\t\t$maxDate.text(dd.format(this.panel.DateFormat)).show();\r\n\t\t}\r\n\t\telse\r\n\t\t\t$maxDate.hide();\t\t\t\r\n\t}\r\n\r\n\tdisplayStatusMessage(msg)\r\n\t{\r\n\t\tthis.elem.html(\"<div class='michaeldmoore-multistat-panel-statusmessage'>\" + msg + \"</div>\");\r\n\t}\r\n\r\n    onRender()\r\n\t{\t\r\n\t\tif (this.data != null && this.data.rows != null) {\r\n\t\t\tvar cols = this.cols;\r\n\t\t\tvar dateTimeCol = -1;\r\n\t\t\tvar labelCol = -1;\r\n\t\t\tvar valueCol = 0;\r\n\t\t\tvar sortCol = 0;\r\n\t\t\tvar groupCol = -1;\r\n\t\t\tfor(let i = 0; i < cols.length; i++){\r\n\t\t\t\tif (cols[i] == this.panel.DateTimeColName)\r\n\t\t\t\t\tdateTimeCol = i;\r\n\t\t\t\tif (cols[i] == this.panel.LabelColName)\r\n\t\t\t\t\tlabelCol = i;\r\n\t\t\t\tif (cols[i] == this.panel.ValueColName)\r\n\t\t\t\t\tvalueCol = i;\r\n\t\t\t\tif (cols[i] == this.panel.SortColName)\r\n\t\t\t\t\tsortCol = i;\r\n\t\t\t\tif (cols[i] == this.panel.GroupColName)\r\n\t\t\t\t\tgroupCol = i;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.panel.LabelNameFilter.length > 0 && labelCol != -1)\r\n\t\t\t{\r\n\t\t\t\tvar regex = new RegExp(this.panel.LabelNameFilter, \"\");\r\n\t\t\t\tthis.matchingRows = [];\r\n\t\t\t\tfor(let i = 0; i < this.data.rows.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar dd = this.data.rows[i];\r\n\t\t\t\t\tvar label = dd[labelCol];\r\n\t\t\t\t\tif (label.match(regex) != null)\r\n\t\t\t\t\t\tthis.matchingRows.push(dd);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.matchingRows.length == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.displayStatusMessage(\"No data.  Regex filter '\" + this.panel.LabelNameFilter + \"' eliminated all \" + this.data.rows.length + \" rows from current query\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthis.matchingRows = this.data.rows;\r\n\t\t\t\r\n\t\t\r\n\t\t\r\n\t\t\tif (this.panel.Aggregate != 'all' && labelCol != -1){\r\n\t\t\t\tvar oo = [];\r\n\t\t\t\tthis.rows = [];\r\n\t\t\t\tswitch(this.panel.Aggregate) {\r\n\t\t\t\t\tcase 'first':\r\n\t\t\t\t\t\tthis.rows = d3.nest()\r\n\t\t\t\t\t\t\t.key(function(d){return d[labelCol];})\r\n\t\t\t\t\t\t\t.rollup(function(d){return d[0];})\r\n\t\t\t\t\t\t\t.entries(this.matchingRows)\r\n\t\t\t\t\t\t\t.forEach(function(x){oo.push(x.value); });\r\n\t\t\t\t\t\tthis.rows = oo;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'last':\r\n\t\t\t\t\t\tthis.rows = d3.nest()\r\n\t\t\t\t\t\t\t.key(function(d){return d[labelCol];})\r\n\t\t\t\t\t\t\t.rollup(function(d){return d[d.length - 1];})\r\n\t\t\t\t\t\t\t.entries(this.matchingRows)\r\n\t\t\t\t\t\t\t.forEach(function(x){oo.push(x.value); });\r\n\t\t\t\t\t\tthis.rows = oo;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'mean':\r\n\t\t\t\t\t\tthis.rows = d3.nest()\r\n\t\t\t\t\t\t\t.key(function(d){return d[labelCol];})\r\n\t\t\t\t\t\t\t.rollup(function(d){\r\n\t\t\t\t\t\t\t\tvar dd = Object.values(Object.assign({}, d[d.length - 1]));\r\n\t\t\t\t\t\t\t\tdd[valueCol] = d3.mean(d, function(d) { return d[valueCol];});\r\n\t\t\t\t\t\t\t\treturn dd;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.entries(this.matchingRows)\r\n\t\t\t\t\t\t\t.forEach(function(x){oo.push(x.value); });\r\n\t\t\t\t\t\tthis.rows = Array.from(oo);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'max':\r\n\t\t\t\t\t\tthis.rows = d3.nest()\r\n\t\t\t\t\t\t\t.key(function(d){return d[labelCol];})\r\n\t\t\t\t\t\t\t.rollup(function(d){\r\n\t\t\t\t\t\t\t\tvar dd = Object.values(Object.assign({}, d[d.length - 1]));\r\n\t\t\t\t\t\t\t\tdd[valueCol] = d3.max(d, function(d) { return d[valueCol];});\r\n\t\t\t\t\t\t\t\treturn dd;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.entries(this.matchingRows)\r\n\t\t\t\t\t\t\t.forEach(function(x){oo.push(x.value); });\r\n\t\t\t\t\t\tthis.rows = Array.from(oo);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'min':\r\n\t\t\t\t\t\tthis.rows = d3.nest()\r\n\t\t\t\t\t\t\t.key(function(d){return d[labelCol];})\r\n\t\t\t\t\t\t\t.rollup(function(d){\r\n\t\t\t\t\t\t\t\tvar dd = Object.values(Object.assign({}, d[d.length - 1]));\r\n\t\t\t\t\t\t\t\tdd[valueCol] = d3.min(d, function(d) { return d[valueCol];});\r\n\t\t\t\t\t\t\t\treturn dd;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.entries(this.matchingRows)\r\n\t\t\t\t\t\t\t.forEach(function(x){oo.push(x.value); });\r\n\t\t\t\t\t\tthis.rows = Array.from(oo);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.rows = this.matchingRows;\r\n\t\t\t}\t\t\r\n\r\n\t\t\t\r\n\t\t\tvar groupNameOffset = this.panel.ShowGroupLabels ? Number(this.panel.GroupLabelFontSize.replace('%','')) * 0.15 : 0;\r\n\t\t\t\r\n\t\t\tif (groupCol >= 0){\r\n\t\t\t\tthis.groupedRows = d3.nest()\r\n\t\t\t\t\t.key(function(d){return d[groupCol];})\r\n\t\t\t\t\t.entries(this.rows);\r\n\r\n\t\t\t\tif (this.panel.GroupNameFilter.length > 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar regexGroupRows = new RegExp(this.panel.GroupNameFilter, \"\");\r\n\t\t\t\t\tlet matchingGroups = [];\r\n\t\t\t\t\tfor(let i = 0; i < this.groupedRows.length; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet groupName = this.groupedRows[i].key;\r\n\t\t\t\t\t\tif (groupName.match(regexGroupRows) != null)\r\n\t\t\t\t\t\t\tmatchingGroups.push(this.groupedRows[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (matchingGroups.length > 0)\r\n\t\t\t\t\t\tthis.groupedRows = matchingGroups;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.displayStatusMessage(\"No groups.  Group Regex filter '\" + this.panel.GroupNameFilter + \"' eliminated all \" + this.groupedRows.length + \" groups from current query\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet groupSortString = this.panel.GroupSortString;\t\r\n\t\t\t\t\r\n\t\t\t\tthis.groupedRows.sort(\r\n\t\t\t\t\tfunction(a,b){\r\n\t\t\t\t\t\tvar aPos = groupSortString.search(a.key);\r\n\t\t\t\t\t\tvar bPos = groupSortString.search(b.key);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (aPos == bPos)\r\n\t\t\t\t\t\t\treturn a.key.localeCompare(b.key);\r\n\t\t\t\t\t\telse if (aPos == -1)\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\telse if (bPos == -1)\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\treturn aPos - bPos;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.groupedRows = null;\t\r\n\r\n\t\t\t\tif (this.panel.SortDirection != \"none\"){\r\n\t\t\t\t\tvar ascending = this.panel.SortDirection == \"ascending\";\r\n\t\t\t\t\tthis.rows.sort(function(x, y){\r\n\t\t\t\t\t\tvar comp = (x[sortCol] == y[sortCol]) ? 0 : ((x[sortCol] > y[sortCol]) ? 1 : -1);\r\n\t\t\t\t\t\treturn ascending ? comp : -comp;\r\n\t\t\t\t\t});\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tthis.elem.html(\"<svg class='\" + this.className + \"'  style='height:100%; width:100%'></svg>\");\r\n\t\t\t//this.elem.html(\"<svg class='\" + this.className + \"'  style='height:\" + this.ctrl.height + \"px; width:100%'></svg>\");\r\n\t\t\tvar $container = this.elem.find('.' + this.className);\r\n\r\n\t\t\tvar h = $container.height();\r\n\t\t\tvar w = $container.width() - 15;\r\n\t\t\tthis.buildDateHtml(dateTimeCol);\r\n\t\t\t\r\n\t\t\tvar horizontal = this.panel.Horizontal;\r\n\t\t\t\r\n\t\t\tvar labelMargin = ($.isNumeric(this.panel.LabelMargin) && this.panel.LabelMargin >= 0) ? this.panel.LabelMargin : null;\r\n\t\t\tvar lowSideMargin = this.panel.LowSideMargin >= 0 ? this.panel.LowSideMargin : 0;\r\n\t\t\tvar highSideMargin = this.panel.HighSideMargin >= 0 ? this.panel.HighSideMargin : 0;\r\n\r\n\t\t\tthis.svg = d3.select('.' + this.className).append('svg');\t\r\n\t\t\tthis.svg.selectAll(\"rect.michaeldmoore-multistat-panel-bar.highflash\").interrupt();\r\n\t\t\tthis.svg.selectAll(\"rect.michaeldmoore-multistat-panel-bar.lowflash\").interrupt();\r\n\r\n\t\t\tvar id = this.panel.id;\r\n\t\t\tvar barPadding = this.panel.BarPadding;\r\n\t\t\tvar baseLineValue = this.panel.BaseLineValue;\r\n\t\t\tvar minLineValue = this.panel.MinLineValue;\r\n\t\t\tvar maxLineValue = this.panel.MaxLineValue;\r\n\t\t\tvar highBarColor = this.panel.HighBarColor;\r\n\t\t\tvar lowBarColor = this.panel.LowBarColor;\r\n\t\t\tvar highLimitValue = this.panel.HighLimitValue;\r\n\t\t\tvar HighLimitBarColor = this.panel.HighLimitBarColor;\r\n\t\t\tvar HighLimitBarFlashColor = this.panel.HighLimitBarFlashColor;\r\n\t\t\tvar HighLimitBarFlashTimeout = this.panel.HighLimitBarFlashTimeout;\r\n\t\t\tvar recolorHighLimitBar = this.panel.RecolorHighLimitBar;\r\n\t\t\tvar lowLimitValue = this.panel.LowLimitValue;\r\n\t\t\tvar LowLimitBarColor = this.panel.LowLimitBarColor;\r\n\t\t\tvar LowLimitBarFlashColor = this.panel.LowLimitBarFlashColor;\r\n\t\t\tvar LowLimitBarFlashTimeout = this.panel.LowLimitBarFlashTimeout;\r\n\t\t\tvar recolorLowLimitBar = this.panel.RecolorLowLimitBar;\r\n\t\t\tvar flashHighLimitBar = this.panel.FlashHighLimitBar;\r\n\t\t\tvar flashLowLimitBar = this.panel.FlashLowLimitBar;\r\n\t\t\tvar showTooltips = this.panel.ShowTooltips;\r\n\t\t\tvar DateTimeColName = this.panel.DateTimeColName;\r\n\t\t\tvar DateFormat = this.panel.DateFormat;\r\n\t\t\tvar TooltipDateFormat = this.panel.TooltipDateFormat;\r\n\t\t\tvar ValueColName = this.panel.ValueColName;\r\n\t\t\tvar ValueDecimals = this.panel.ValueDecimals;\r\n\t\t\tvar OddRowColor = this.panel.OddRowColor;\r\n\t\t\tvar EvenRowColor = this.panel.EvenRowColor;\r\n\t\t\tvar TZOffsetHours = this.panel.TZOffsetHours;\r\n\t\t\tvar GroupCols = this.panel.GroupCols;\r\n\t\t\tvar GroupGap = this.panel.GroupGap;\r\n\t\t\tvar ScaleFactor = Number(this.panel.ScaleFactor);\r\n\t\t\tvar LabelColor = this.panel.LabelColor;\r\n\t\t\tvar ValuePosition = this.panel.ValuePosition;\r\n\t\t\t\r\n\t\t\tvar minValue = d3.min(this.rows, function(d) { return Number(d[valueCol]) * ScaleFactor; });\r\n\t\t\tif ($.isNumeric(minLineValue) == false)\r\n\t\t\t\tminLineValue = minValue;\r\n\t\t\t\r\n\t\t\tvar maxValue = d3.max(this.rows, function(d) { return Number(d[valueCol]) * ScaleFactor; });\r\n\t\t\tif ($.isNumeric(maxLineValue) == false)\r\n\t\t\t\tmaxLineValue = maxValue;\t\t\t\t\r\n\t\t\t\r\n\t\t\tif ($.isNumeric(baseLineValue) == false)\r\n\t\t\t\tbaseLineValue = 0;\r\n\t\t\t\r\n\t\t\tif (minLineValue > baseLineValue)\r\n\t\t\t\tminLineValue = baseLineValue;\r\n\t\t\t\r\n\t\t\tif ($.isNumeric(lowLimitValue) && minLineValue > lowLimitValue)\r\n\t\t\t\tminLineValue = lowLimitValue;\r\n\t\t\t\r\n\t\t\tif (maxLineValue < baseLineValue)\r\n\t\t\t\tmaxLineValue = baseLineValue;\r\n\t\t\t\r\n\t\t\tif ($.isNumeric(highLimitValue) && maxLineValue < highLimitValue)\r\n\t\t\t\tmaxLineValue = highLimitValue;\r\n\r\n\t\t\td3.select(\"body\").append(\"div\")\r\n\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-tooltip michaeldmoore-multistat-panel-tooltip-\" + id)\r\n\t\t\t\t.style(\"opacity\", 0);\r\n\t\t\t\r\n\t\t\tvar tooltipShow = function(d, c, id){\r\n\t\t\t\tvar tooltipDiv = d3.select(\".michaeldmoore-multistat-panel-tooltip-\" + id);\r\n\t\t\t\ttooltipDiv.transition()\r\n\t\t\t\t.duration(200)\r\n\t\t\t\t.style(\"opacity\", 0.9);\r\n\t\t\t\tvar html = \"<table>\";\r\n\t\t\t\tfor (var i = 0; i < d.length; i++){\r\n\t\t\t\t\tvar cc = c[i];\r\n\t\t\t\t\tvar dd = d[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (cc == DateTimeColName)\r\n\t\t\t\t\t\tdd = moment(dd).add(TZOffsetHours, 'h').format(TooltipDateFormat);\r\n\t\t\t\t\telse if (cc == ValueColName && $.isNumeric(dd))\r\n\t\t\t\t\t\tdd = Number(dd).toFixed(ValueDecimals);\r\n\t\t\t\t\t\r\n\t\t\t\t\thtml += \"<tr><td>\" + cc + \"</td><td>\" + dd + \"</td></tr>\";\r\n\t\t\t\t}\r\n\t\t\t\thtml += \"</table>\";\r\n\t\t\t\ttooltipDiv.html(html)\r\n\t\t\t\t.style(\"left\", d3.event.pageX + \"px\")\r\n\t\t\t\t.style(\"top\", (d3.event.pageY - 28) + \"px\");\r\n\t\t\t};\r\n\r\n\t\t\tvar tooltipHide = function(id) {\r\n\t\t\t\tvar tooltipDiv = d3.selectAll(\".michaeldmoore-multistat-panel-tooltip-\" + id);\r\n\t\t\t\ttooltipDiv.transition()\t\t\r\n\t\t\t\t.duration(500)\t\t\r\n\t\t\t\t.style(\"opacity\", 0);\t\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tvar scaleAndClipValue = function(d) {\r\n\t\t\t\tvar val = d * ScaleFactor;\r\n\t\t\t\tif (val > maxLineValue)\r\n\t\t\t\t\tval = maxLineValue;\r\n\t\t\t\tif (val < minLineValue)\r\n\t\t\t\t\tval = minLineValue;\r\n\t\t\t\t\r\n\t\t\t\treturn val;\r\n\t\t\t};\r\n\r\n\t\t\tif(horizontal) {\r\n\t\t\t\tvar plotGroupHorizontal = function(panel, svg, data, numRows, groupName, groupNameOffset, left, w, hh, dh) {\r\n\r\n\t\t\t\t\t// draw border rectangle\r\n\t\t\t\t\t/*svg.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"width\", w)\r\n\t\t\t\t\t\t.attr(\"height\", dh)\r\n\t\t\t\t\t\t.attr(\"x\", left)\r\n\t\t\t\t\t\t.attr(\"y\", hh)\r\n\t\t\t\t\t\t.attr(\"stroke\", \"yellow\");*/\r\n\r\n\t\t\t\t\tif (panel.SortDirection != \"none\"){\r\n\t\t\t\t\t\tvar ascending = panel.SortDirection == \"ascending\";\r\n\t\t\t\t\t\tdata.sort(function(x, y){\r\n\t\t\t\t\t\t\tvar comp = (x[sortCol] == y[sortCol]) ? 0 : ((x[sortCol] > y[sortCol]) ? 1 : -1);\r\n\t\t\t\t\t\t\treturn ascending ? comp : -comp;\r\n\t\t\t\t\t\t});\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Add Above-High Side Group Names\r\n\t\t\t\t\tif(groupName != '' && panel.ShowGroupLabels) {\r\n\t\t\t\t\t\tsvg\r\n\t\t\t\t\t\t\t.append(\"text\")\r\n\t\t\t\t\t\t\t.text(groupName)\r\n\t\t\t\t\t\t\t.attr(\"x\", left + (labelMargin + w)/2)\r\n\t\t\t\t\t\t\t.attr(\"y\", hh + groupNameOffset/2)\r\n\t\t\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t\t\t.attr(\"font-size\", panel.GroupLabelFontSize)\r\n\t\t\t\t\t\t\t.attr(\"fill\", panel.GroupLabelColor)\r\n\t\t\t\t\t\t\t.attr(\"background\", \"blue\")\r\n\t\t\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t\t\t.attr(\"dominant-baseline\", \"central\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\thh += groupNameOffset;\r\n\t\t\t\t\tdh -= groupNameOffset;\r\n\r\n\t\t\t\t\t// draw border rectangle\r\n\t\t\t\t\t/*svg.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"width\", w)\r\n\t\t\t\t\t\t.attr(\"height\", dh)\r\n\t\t\t\t\t\t.attr(\"x\", left)\r\n\t\t\t\t\t\t.attr(\"y\", hh)\r\n\t\t\t\t\t\t.attr(\"stroke\", \"#ffffff\");*/\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tvar labels = data.map(function(d){ return d[labelCol]; });\r\n\t\t\t\t\twhile (labels.length < numRows)\r\n\t\t\t\t\t\tlabels = labels.concat('_' + Math.random().toString(36).substr(2, 9));\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar labelScale = d3.scaleBand()\r\n\t\t\t\t\t\t\t\t.domain(labels)\r\n\t\t\t\t\t\t\t\t.rangeRound([hh + highSideMargin, hh + dh - lowSideMargin])\r\n\t\t\t\t\t\t\t\t.paddingInner(barPadding / 100)\r\n\t\t\t\t\t\t\t\t.paddingOuter(barPadding / 200);\r\n\t\t\t\t\r\n\t\t\t\t\tvar stripedata = data.concat(d3.range(data.length, numRows));\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar stripeScale = d3.scaleBand()\r\n\t\t\t\t\t\t\t\t.domain(stripedata)\r\n\t\t\t\t\t\t\t\t.rangeRound([hh + highSideMargin, hh + dh - lowSideMargin]);\r\n\t\t\t\t\r\n\t\t\t\t\t// Draw background of alternating stripes \r\n\t\t\t\t\tvar oddeven = false;\r\n\t\t\t\t\tsvg.append(\"g\")\r\n\t\t\t\t\t\t.selectAll(\"rect\")\r\n\t\t\t\t\t\t.data(stripedata)\r\n\t\t\t\t\t\t.enter()\r\n\t\t\t\t\t\t.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-row\")\r\n\t\t\t\t\t\t.attr(\"width\", w)\r\n\t\t\t\t\t\t.attr(\"height\", stripeScale.step())\r\n\t\t\t\t\t\t.attr(\"x\", left)\r\n\t\t\t\t\t\t.attr(\"y\", function(d){return stripeScale(d);})\r\n\t\t\t\t\t\t.attr(\"fill\", function(d) { \r\n\t\t\t\t\t\t\t\toddeven = !oddeven;\r\n\t\t\t\t\t\t\t\treturn oddeven ? OddRowColor : EvenRowColor;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseover\", function(d, i) {\r\n\t\t\t\t\t\t\tif (showTooltips && i < data.length)\r\n\t\t\t\t\t\t\t\ttooltipShow(d, cols, id);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseout\", function() { \r\n\t\t\t\t\t\t\ttooltipHide(id);\r\n\t\t\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\tvar gg = svg\r\n\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t.selectAll(\"text\")\r\n\t\t\t\t\t\t.data(data)\r\n\t\t\t\t\t\t.enter()\r\n\t\t\t\t\t\t.append(\"g\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (panel.ShowValues && panel.ValuePosition == \"top\") {\r\n\t\t\t\t\t\tvar maxValueWidth = 0;\r\n\t\t\t\t\t\tgg.append(\"text\")\r\n\t\t\t\t\t\t.text(function(d) {return (Number(d[valueCol]) * ScaleFactor).toFixed(ValueDecimals);})\r\n\t\t\t\t\t\t.attr(\"x\", left + w)\r\n\t\t\t\t\t\t.attr(\"y\", function(d,i){return labelScale(d[labelCol]) + (labelScale.bandwidth() / 2);})\r\n\t\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t\t.attr(\"font-size\", panel.ValueFontSize)\r\n\t\t\t\t\t\t.attr(\"fill\", panel.ValueColor)\r\n\t\t\t\t\t\t.attr(\"text-anchor\", \"end\")\r\n\t\t\t\t\t\t.attr(\"dominant-baseline\", \"central\")\r\n\t\t\t\t\t\t.each(function(d,i) {\r\n\t\t\t\t\t\t\tvar thisWidth = this.getComputedTextLength();\r\n\t\t\t\t\t\t\tmaxValueWidth = d3.max([maxValueWidth, thisWidth]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tw -= maxValueWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (panel.ShowLabels) {\r\n\t\t\t\t\t\tvar maxLabelWidth = 0;\r\n\t\t\t\t\t\tvar labelAngle = Number(panel.LableAngle); \r\n\t\t\t\t\t\tgg.append(\"text\")\r\n\t\t\t\t\t\t.text(function(d) { return d[labelCol]; })\r\n\t\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t\t.attr(\"font-size\", panel.LabelFontSize)\r\n\t\t\t\t\t\t.attr(\"fill\", function(d,i){return d[valueCol] * ScaleFactor > maxLineValue || d[valueCol] * ScaleFactor < minLineValue ? panel.OutOfRangeLabelColor : panel.LabelColor; })\r\n\t\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t\t.attr(\"dominant-baseline\", \"central\")\r\n\t\t\t\t\t\t.attr(\"transform\", function(d, i) { \r\n\t\t\t\t\t\t\tvar bbox = this.getBBox();\r\n\t\t\t\t\t\t\tvar s = Math.sin(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\t\tvar c = Math.cos(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\t\tvar b = Math.abs(bbox.width * s) + Math.abs(bbox.height * c);\r\n\t\t\t\t\t\t\tvar a = Math.abs(bbox.width * c) + Math.abs(bbox.height * s);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar y =  labelScale(d[labelCol]) + (labelScale.bandwidth() / 2);\r\n\t\t\t\t\t\t\tvar x = left + a/2;\r\n\t\t\t\t\t\t\treturn \"translate(\"+x+\",\"+y+\") rotate(\"+labelAngle+\")\";\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseover\", function(d) {\r\n\t\t\t\t\t\t\tif (showTooltips)\r\n\t\t\t\t\t\t\t\ttooltipShow(d, cols, id);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseout\", function() { \r\n\t\t\t\t\t\t\ttooltipHide(id);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.each(function(d,i) {\r\n\t\t\t\t\t\t\tvar bbox = this.getBBox();\r\n\t\t\t\t\t\t\tvar s = Math.sin(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\t\tvar c = Math.cos(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\t\tvar b = Math.abs(bbox.width * s) + Math.abs(bbox.height * c);\r\n\t\t\t\t\t\t\tvar a = Math.abs(bbox.width * c) + Math.abs(bbox.height * s);\r\n\r\n\t\t\t\t\t\t\tvar thisWidth = a;\r\n\t\t\t\t\t\t\tmaxLabelWidth = d3.max([maxLabelWidth, thisWidth]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ($.isNumeric(labelMargin)){\r\n\t\t\t\t\t\t\tleft += labelMargin;\r\n\t\t\t\t\t\t\tw -= labelMargin;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tleft += maxLabelWidth;\r\n\t\t\t\t\t\t\tw -= maxLabelWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar valueScale = d3.scaleLinear()\r\n\t\t\t\t\t\t.domain([minLineValue, maxLineValue])\r\n\t\t\t\t\t\t.range([left + labelMargin, left + w])\r\n\t\t\t\t\t\t.nice();\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\tfunction vLine(svg, value, color) {\t\r\n\t\t\t\t\t\tsvg.append(\"line\")\r\n\t\t\t\t\t\t\t.style(\"stroke\", color)\r\n\t\t\t\t\t\t\t.attr(\"y1\", hh + highSideMargin)\r\n\t\t\t\t\t\t\t.attr(\"x1\", valueScale(value))\r\n\t\t\t\t\t\t\t.attr(\"y2\", hh + dh - lowSideMargin)\r\n\t\t\t\t\t\t\t.attr(\"x2\", valueScale(value));\r\n\t\t\t\t\t}\t\t\t\r\n\r\n\t\t\t\t\tif(panel.ShowBaseLine)\r\n\t\t\t\t\t\tvLine(svg, baseLineValue, panel.BaseLineColor);\r\n\r\n\t\t\t\t\tif(panel.ShowMaxLine)\r\n\t\t\t\t\t\tvLine(svg, maxLineValue, panel.MaxLineColor);\r\n\r\n\t\t\t\t\tif(panel.ShowMinLine)\r\n\t\t\t\t\t\tvLine(svg, minLineValue, panel.MinLineColor);\r\n\r\n\t\t\t\t\tif(panel.ShowHighLimitLine)\r\n\t\t\t\t\t\tvLine(svg, highLimitValue, panel.HighLimitLineColor);\r\n\r\n\t\t\t\t\tif(panel.ShowLowLimitLine)\r\n\t\t\t\t\t\tvLine(svg, lowLimitValue, panel.LowLimitLineColor);\r\n\r\n\t\t\t\t\tsvg\r\n\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t.selectAll(\"rect\")\r\n\t\t\t\t\t\t.data(data)\r\n\t\t\t\t\t\t.enter()\r\n\t\t\t\t\t\t.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-bar\")\r\n\t\t\t\t\t\t.attr(\"width\", function(d) {\r\n\t\t\t\t\t\t\tvar val = scaleAndClipValue(d[valueCol]);\r\n\t\t\t\t\t\t\treturn Math.abs(valueScale(val) - valueScale(baseLineValue));\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.attr(\"height\", labelScale.bandwidth())\r\n\t\t\t\t\t\t.attr(\"x\", function(d) { \r\n\t\t\t\t\t\t\tvar val = scaleAndClipValue(d[valueCol]);\r\n\t\t\t\t\t\t\treturn d3.min([valueScale(val), valueScale(baseLineValue)]); \r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.attr(\"y\", function(d,i){return labelScale(d[labelCol]);})\r\n\t\t\t\t\t\t.attr(\"fill\", function(d) { \r\n\t\t\t\t\t\t\tif (recolorHighLimitBar && (d[valueCol] * ScaleFactor > highLimitValue))\r\n\t\t\t\t\t\t\t\treturn HighLimitBarColor;\r\n\t\t\t\t\t\t\tif (recolorLowLimitBar && (d[valueCol] * ScaleFactor < lowLimitValue))\r\n\t\t\t\t\t\t\t\treturn LowLimitBarColor;\r\n\t\t\t\t\t\t\treturn (d[valueCol] * ScaleFactor > baseLineValue) ? highBarColor : lowBarColor;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.classed(\"highflash\", function(d) { \r\n\t\t\t\t\t\t\treturn recolorHighLimitBar && flashHighLimitBar && (d[valueCol] * ScaleFactor > highLimitValue);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.classed(\"lowflash\", function(d) { \r\n\t\t\t\t\t\t\treturn recolorLowLimitBar && flashLowLimitBar && (d[valueCol] * ScaleFactor < lowLimitValue);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseover\", function(d) {\r\n\t\t\t\t\t\t\tif (showTooltips)\r\n\t\t\t\t\t\t\t\ttooltipShow(d, cols, id);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseout\", function() { \r\n\t\t\t\t\t\t\ttooltipHide(id);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\tvar g = svg\r\n\t\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t\t.selectAll(\"text\")\r\n\t\t\t\t\t\t\t.data(data)\r\n\t\t\t\t\t\t\t.enter()\r\n\t\t\t\t\t\t\t.append(\"g\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (panel.ShowValues && panel.ValuePosition != \"top\") {\r\n\t\t\t\t\t\tg.append(\"text\")\r\n\t\t\t\t\t\t.text(function(d) {return (Number(d[valueCol]) * ScaleFactor).toFixed(ValueDecimals);})\r\n\t\t\t\t\t\t.attr(\"x\", function(d){\r\n\t\t\t\t\t\t\tif (panel.ValuePosition == \"bar base\")\r\n\t\t\t\t\t\t\t\treturn valueScale(baseLineValue);// + 5;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tvar val = scaleAndClipValue(d[valueCol]);\r\n\t\t\t\t\t\t\t\treturn valueScale(val) + ((val > baseLineValue)); // ? - 5 : + 5)\r\n\t\t\t\t\t\t\t}})\r\n\t\t\t\t\t\t.attr(\"y\", function(d,i){return labelScale(d[labelCol]) + (labelScale.bandwidth() / 2);})\r\n\t\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t\t.attr(\"font-size\", panel.ValueFontSize)\r\n\t\t\t\t\t\t.attr(\"fill\", panel.ValueColor)\r\n\t\t\t\t\t\t.attr(\"text-anchor\", function(d){\r\n\t\t\t\t\t\t\tif (panel.ValuePosition == \"bar base\")\r\n\t\t\t\t\t\t\t\treturn (d[valueCol] * ScaleFactor > baseLineValue) ? \"start\" : \"end\";\r\n\t\t\t\t\t\t\t\t//return \"start\";\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn (d[valueCol] * ScaleFactor > baseLineValue) ? \"end\" : \"start\";\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.attr(\"dominant-baseline\", \"central\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//Add High Side Value Axis (X)\r\n\t\t\t\t\tif (highSideMargin > 0) {\r\n\t\t\t\t\t\tvar ggHighSide = svg\r\n\t\t\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t\t\t.attr(\"transform\", 'translate(1,' + (hh + highSideMargin) + ')')\r\n\t\t\t\t\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-valueaxis\")\r\n\t\t\t\t\t\t\t\t.call(d3.axisTop(valueScale));\r\n\t\t\t\t\t\tggHighSide.selectAll('.tick text').attr('fill', panel.HighAxisColor);\r\n\t\t\t\t\t\tggHighSide.selectAll('.tick line').attr('stroke', panel.HighAxisColor);\r\n\t\t\t\t\t\tggHighSide.selectAll('path.domain').attr('stroke', panel.HighAxisColor);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t//Add Low Side Value Axis (X)\r\n\t\t\t\t\tif (lowSideMargin > 0) {\t\r\n\t\t\t\t\t\tvar ggLowSide = svg\r\n\t\t\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t\t\t.attr(\"transform\", 'translate(0,' + (hh + dh - lowSideMargin) + ')')\r\n\t\t\t\t\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-valueaxis\")\r\n\t\t\t\t\t\t\t\t.call(d3.axisBottom(valueScale));\r\n\t\t\t\t\t\tggLowSide.selectAll('.tick text').attr('fill', panel.LowAxisColor);\r\n\t\t\t\t\t\tggLowSide.selectAll('.tick line').attr('stroke', panel.LowAxisColor);\r\n\t\t\t\t\t\tggLowSide.selectAll('path.domain').attr('stroke', panel.LowAxisColor);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (this.groupedRows != null){\r\n\t\t\t\t\tvar gcols = (GroupCols <= 0 || GroupCols > this.groupedRows.length) ? this.groupedRows.length : GroupCols;\r\n\t\t\t\t\tvar dw = ((w + GroupGap) / gcols);\r\n\r\n\t\t\t\t\t// figure out the max data points in each row of groups...\r\n\t\t\t\t\tvar pointsPerRow = [];\r\n\t\t\t\t\tfor(let i = 0; i < this.groupedRows.length/gcols; i++)\r\n\t\t\t\t\t\tpointsPerRow.push(0);\r\n\t\t\t\t\tfor(let i = 0; i < this.groupedRows.length; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet rr = Math.floor(i / gcols);\r\n\t\t\t\t\t\tlet u = this.groupedRows[i].values.length;\r\n\t\t\t\t\t\tif (pointsPerRow[rr] < u)\r\n\t\t\t\t\t\t\tpointsPerRow[rr] = u;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar totalPoints = 0;\r\n\t\t\t\t\tfor(let i = 0; i < pointsPerRow.length; i++)\r\n\t\t\t\t\t\ttotalPoints += pointsPerRow[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar rowOverheadHeight = groupNameOffset + this.panel.LowSideMargin + this.panel.HighSideMargin;\r\n\t\t\t\t\tvar rowHeight = (h - (pointsPerRow.length * rowOverheadHeight)) / totalPoints;\t\t\t\t\t\r\n\r\n\t\t\t\t\tvar numRows = Math.ceil(this.groupedRows.length / gcols);\r\n\t\t\t\t\tvar hh = 0;\r\n\t\t\t\t\tfor (var rr = 0; rr < numRows; rr++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar nn = pointsPerRow[rr];\r\n\t\t\t\t\t\tvar dh = rowOverheadHeight + (nn * rowHeight);\r\n\t\t\t\t\t\thh += dh;\r\n\t\t\t\t\t\tfor (var cc = 0; cc < gcols; cc++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvar ii = cc + (rr * gcols);\r\n\t\t\t\t\t\t\tif (ii < this.groupedRows.length)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tplotGroupHorizontal(this.panel, this.svg, this.groupedRows[ii].values, nn, this.groupedRows[ii].key, groupNameOffset, \r\n\t\t\t\t\t\t\t\t\tcc * dw, dw - GroupGap, hh - dh, dh);\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tplotGroupHorizontal(this.panel, this.svg, this.rows, this.rows.length, '', 0, 0, w, 0, h);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar plotGroupVertical = function(panel, svg, data, numRows, groupName, groupNameOffset, left, w, hh, dh) \r\n\t\t\t\t{\r\n\t\t\t\t\t// draw border rectangle\r\n\t\t\t\t\t/*svg.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"width\", w)\r\n\t\t\t\t\t\t.attr(\"height\", dh)\r\n\t\t\t\t\t\t.attr(\"x\", left)\r\n\t\t\t\t\t\t.attr(\"y\", hh)\r\n\t\t\t\t\t\t.attr(\"stroke\", \"yellow\");*/\r\n\r\n\t\t\t\t\tif (panel.SortDirection != \"none\"){\r\n\t\t\t\t\t\tvar ascending = panel.SortDirection == \"ascending\";\r\n\t\t\t\t\t\tdata.sort(function(x, y){\r\n\t\t\t\t\t\t\tvar comp = (x[sortCol] == y[sortCol]) ? 0 : ((x[sortCol] > y[sortCol]) ? 1 : -1);\r\n\t\t\t\t\t\t\treturn ascending ? comp : -comp;\r\n\t\t\t\t\t\t});\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Add Above-High Side Group Names\r\n\t\t\t\t\tif(groupName != '' && panel.ShowGroupLabels) {\r\n\t\t\t\t\t\tsvg\r\n\t\t\t\t\t\t\t.append(\"text\")\r\n\t\t\t\t\t\t\t.text(groupName)\r\n\t\t\t\t\t\t\t.attr(\"x\", left + (labelMargin + w)/2)\r\n\t\t\t\t\t\t\t.attr(\"y\", hh + groupNameOffset/2)\r\n\t\t\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t\t\t.attr(\"font-size\", panel.GroupLabelFontSize)\r\n\t\t\t\t\t\t\t.attr(\"fill\", panel.GroupLabelColor)\r\n\t\t\t\t\t\t\t.attr(\"background\", \"blue\")\r\n\t\t\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t\t\t.attr(\"dominant-baseline\", \"central\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\thh += groupNameOffset;\r\n\t\t\t\t\tdh -= groupNameOffset;\r\n\r\n\t\t\t\t\t// draw border rectangle\r\n\t\t\t\t\t/*svg.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"width\", w)\r\n\t\t\t\t\t\t.attr(\"height\", dh)\r\n\t\t\t\t\t\t.attr(\"x\", left)\r\n\t\t\t\t\t\t.attr(\"y\", hh)\r\n\t\t\t\t\t\t.attr(\"stroke\", \"#ffffff\");*/\r\n\r\n\r\n\t\t\t\t\tvar labels = data.map(function(d){ return d[labelCol]; });\r\n\t\t\t\t\twhile (labels.length < numRows)\r\n\t\t\t\t\t\tlabels = labels.concat('_' + Math.random().toString(36).substr(2, 9));\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\tvar labelScale = d3.scaleBand()\r\n\t\t\t\t\t\t\t\t.domain(labels)\r\n\t\t\t\t\t\t\t\t.range([left + lowSideMargin, left + w - highSideMargin])\r\n\t\t\t\t\t\t\t\t.paddingInner(barPadding / 100)\r\n\t\t\t\t\t\t\t\t.paddingOuter(barPadding / 200);\r\n\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tvar stripedata = data.concat(d3.range(data.length, numRows));\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar stripeScale = d3.scaleBand()\r\n\t\t\t\t\t\t\t\t.domain(stripedata)\r\n\t\t\t\t\t\t\t\t.range([left + lowSideMargin, left + w - highSideMargin]);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t// Draw background of alternating stripes \r\n\t\t\t\t\tvar oddeven = false;\r\n\t\t\t\t\tsvg.append(\"g\")\r\n\t\t\t\t\t\t.selectAll(\"rect\")\r\n\t\t\t\t\t\t.data(stripedata)\r\n\t\t\t\t\t\t.enter()\r\n\t\t\t\t\t\t.append(\"rect\")\r\n\t\t\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-row\")\r\n\t\t\t\t\t\t.attr(\"width\", stripeScale.step())\r\n\t\t\t\t\t\t.attr(\"height\", dh)\r\n\t\t\t\t\t\t.attr(\"x\", function(d,i){return stripeScale(d);})\r\n\t\t\t\t\t\t.attr(\"y\", hh)\r\n\t\t\t\t\t\t.attr(\"fill\", function(d) { \r\n\t\t\t\t\t\t\t\toddeven = !oddeven;\r\n\t\t\t\t\t\t\t\treturn oddeven ? OddRowColor : EvenRowColor;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseover\", function(d, i) {\r\n\t\t\t\t\t\t\tif (showTooltips && i < data.length)\r\n\t\t\t\t\t\t\t\ttooltipShow(d, cols, id);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on(\"mouseout\", function() { \r\n\t\t\t\t\t\t\ttooltipHide(id);\r\n\t\t\t\t\t\t\t});\r\n\r\n\r\n\r\n\t\t\t\tvar gg = svg\r\n\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t.selectAll(\"text\")\r\n\t\t\t\t\t.data(data)\r\n\t\t\t\t\t.enter()\r\n\t\t\t\t\t.append(\"g\");\r\n\t\t\t\t\t\r\n\t\t\t\tif (panel.ShowValues && panel.ValuePosition == \"top\") {\r\n\t\t\t\t\tvar maxValueHeight = 0;\r\n\t\t\t\t\tgg.append(\"text\")\r\n\t\t\t\t\t.text(function(d) {return (Number(d[valueCol]) * ScaleFactor).toFixed(ValueDecimals);})\r\n\t\t\t\t\t.attr(\"x\", function(d, i) { return labelScale(d[labelCol]) + (labelScale.bandwidth() / 2); })\r\n\t\t\t\t\t.attr(\"y\", hh)\r\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t.attr(\"font-size\", panel.ValueFontSize)\r\n\t\t\t\t\t.attr(\"fill\", panel.ValueColor)\r\n\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t.attr(\"dominant-baseline\", \"text-before-edge\")\r\n\t\t\t\t\t.each(function(d,i) {\r\n\t\t\t\t\t\tvar thisHeight = this.getBBox().height;\r\n\t\t\t\t\t\tmaxValueHeight = d3.max([maxValueHeight, thisHeight]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thh += maxValueHeight;\r\n\t\t\t\t\tdh -= maxValueHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (panel.ShowLabels) {\r\n\t\t\t\t\tvar maxLabelHeight = 0;\r\n\t\t\t\t\tvar labelAngle = Number(panel.LableAngle); \r\n\t\t\t\t\tgg.append(\"text\")\r\n\t\t\t\t\t.text(function(d) { return d[labelCol]; })\r\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t.attr(\"font-size\", panel.LabelFontSize)\r\n\t\t\t\t\t.attr(\"fill\", function(d,i){return d[valueCol] * ScaleFactor > maxLineValue || d[valueCol] * ScaleFactor < minLineValue ? panel.OutOfRangeLabelColor : LabelColor; })\r\n\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t.attr(\"dominant-baseline\", \"central\")\r\n\t\t\t\t\t.attr(\"transform\", function(d, i) { \r\n\t\t\t\t\t\tvar bbox = this.getBBox();\r\n\t\t\t\t\t\tvar s = Math.sin(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\tvar c = Math.cos(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\tvar b = Math.abs(bbox.width * s) + Math.abs(bbox.height * c);\r\n\t\t\t\t\t\tvar a = Math.abs(bbox.width * c) + Math.abs(bbox.height * s);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar x =  labelScale(d[labelCol]) + (labelScale.bandwidth() / 2);\r\n\t\t\t\t\t\tvar y = hh + dh - b/2;\r\n\t\t\t\t\t\treturn \"translate(\"+x+\",\"+y+\") rotate(\"+labelAngle+\")\";\r\n\t\t\t\t\t})\t\t\t\t\t\r\n\t\t\t\t\t.on(\"mouseover\", function(d) {\r\n\t\t\t\t\t\tif (showTooltips)\r\n\t\t\t\t\t\t\ttooltipShow(d, cols, id);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.on(\"mouseout\", function() { \r\n\t\t\t\t\t\ttooltipHide(id);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.each(function(d,i) {\r\n\t\t\t\t\t\tvar bbox = this.getBBox();\r\n\t\t\t\t\t\tvar s = Math.sin(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\tvar c = Math.cos(labelAngle * Math.PI / 180);\r\n\t\t\t\t\t\tvar b = Math.abs(bbox.width * s) + Math.abs(bbox.height * c);\r\n\t\t\t\t\t\tvar a = Math.abs(bbox.width * c) + Math.abs(bbox.height * s);\r\n\r\n\t\t\t\t\t\tvar thisHeight = b;\r\n\t\t\t\t\t\tmaxLabelHeight = d3.max([maxLabelHeight, thisHeight]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif ($.isNumeric(labelMargin)){\r\n\t\t\t\t\t\tdh -= labelMargin;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tdh -= maxLabelHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar valueScale = d3.scaleLinear()\r\n\t\t\t\t\t.domain([maxLineValue, minLineValue])\r\n\t\t\t\t\t.range([hh, hh + dh])\r\n\t\t\t\t\t.nice();\r\n\t\t\t\t\r\n\t\t\t\tfunction hLine(svg, value, color) {\t\r\n\t\t\t\t\tsvg.append(\"line\")\r\n\t\t\t\t\t\t.style(\"stroke\", color)\r\n\t\t\t\t\t\t.attr(\"x1\", left + lowSideMargin)\r\n\t\t\t\t\t\t.attr(\"y1\", valueScale(value))\r\n\t\t\t\t\t\t.attr(\"x2\", left + w - highSideMargin)\r\n\t\t\t\t\t\t.attr(\"y2\", valueScale(value));\r\n\t\t\t\t}\t\t\t\r\n\r\n\t\t\t\t\r\n\t\t\t\tif(panel.ShowBaseLine)\r\n\t\t\t\t\thLine(svg, baseLineValue, panel.BaseLineColor);\r\n\r\n\t\t\t\tif(panel.ShowMaxLine)\r\n\t\t\t\t\thLine(svg, maxLineValue, panel.MaxLineColor);\r\n\r\n\t\t\t\tif(panel.ShowMinLine)\r\n\t\t\t\t\thLine(svg, minLineValue, panel.MinLineColor);\r\n\r\n\t\t\t\tif(panel.ShowHighLimitLine)\r\n\t\t\t\t\thLine(svg, highLimitValue, panel.HighLimitLineColor);\r\n\r\n\t\t\t\tif(panel.ShowLowLimitLine)\r\n\t\t\t\t\thLine(svg, lowLimitValue, panel.LowLimitLineColor);\r\n\r\n\t\t\t\tgg.append(\"rect\")\t\r\n\t\t\t\t\t.attr(\"class\", \"michaeldmoore-multistat-panel-bar\")\r\n\t\t\t\t\t.attr(\"height\", function(d) { \r\n\t\t\t\t\t\tvar val = scaleAndClipValue(d[valueCol]);\r\n\t\t\t\t\t\treturn Math.abs(valueScale(baseLineValue) - valueScale(val));\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.attr(\"width\", labelScale.bandwidth())\r\n\t\t\t\t\t.attr(\"y\", function(d) { \r\n\t\t\t\t\t\tvar val = scaleAndClipValue(d[valueCol]);\r\n\t\t\t\t\t\treturn d3.min([valueScale(val), valueScale(baseLineValue)]); \r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.attr(\"x\", function(d, i) { return labelScale(d[labelCol]);})\r\n\t\t\t\t\t.attr(\"fill\", function(d) { \r\n\t\t\t\t\t\tif (recolorHighLimitBar && (d[valueCol] * ScaleFactor > highLimitValue))\r\n\t\t\t\t\t\t\treturn HighLimitBarColor;\r\n\t\t\t\t\t\tif (recolorLowLimitBar && (d[valueCol] * ScaleFactor < lowLimitValue))\r\n\t\t\t\t\t\t\treturn LowLimitBarColor;\r\n\t\t\t\t\t\treturn (d[valueCol] * ScaleFactor > baseLineValue) ? highBarColor : lowBarColor;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.classed(\"highflash\", function(d) { \r\n\t\t\t\t\t\treturn recolorHighLimitBar && flashHighLimitBar && (d[valueCol] * ScaleFactor > highLimitValue);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.classed(\"lowflash\", function(d) { \r\n\t\t\t\t\t\treturn recolorLowLimitBar && flashLowLimitBar && (d[valueCol] * ScaleFactor < lowLimitValue);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t    .on(\"mouseover\", function(d) {\r\n\t\t\t\t\t\tif (showTooltips)\r\n\t\t\t\t\t\t\ttooltipShow(d, cols, id);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t.on(\"mouseout\", function() { \r\n\t\t\t\t\t\ttooltipHide(id);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\tif (panel.ShowValues && panel.ValuePosition != \"top\") {\r\n\t\t\t\t\tgg.append(\"text\")\r\n\t\t\t\t\t.text(function(d) {return (Number(d[valueCol]) * ScaleFactor).toFixed(ValueDecimals);})\r\n\t\t\t\t\t.attr(\"x\", function(d, i) { return labelScale(d[labelCol]) + (labelScale.bandwidth() / 2); })\r\n\t\t\t\t\t.attr(\"y\", function(d){\r\n\t\t\t\t\t\tif (ValuePosition == \"bar base\")\r\n\t\t\t\t\t\t\treturn valueScale(baseLineValue);\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tvar val = scaleAndClipValue(d[valueCol]);\r\n\t\t\t\t\t\t\treturn valueScale(val);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\r\n\t\t\t\t\t.attr(\"font-size\", panel.ValueFontSize)\r\n\t\t\t\t\t.attr(\"fill\", panel.ValueColor)\r\n\t\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t\t.attr(\"dominant-baseline\", function(d){\r\n\t\t\t\t\t\tif (ValuePosition == \"bar base\")\r\n\t\t\t\t\t\t\treturn (d[valueCol] * ScaleFactor > baseLineValue) ? \"text-after-edge\" : \"text-before-edge\";\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\treturn (d[valueCol] * ScaleFactor > baseLineValue) ? \"text-before-edge\" : \"text-after-edge\";\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (lowSideMargin > 0) {\t\r\n\t\t\t\t\tlet gg = svg\r\n\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t.attr('transform', 'translate(' + (left + lowSideMargin) + ', 0)')\r\n\t\t\t\t\t\t.classed('michaeldmoore-multistat-panel-valueaxis', true)\r\n\t\t\t\t\t\t.call(d3.axisLeft(valueScale).tickSizeInner(5).tickSizeOuter(10).ticks(5));\r\n\t\t\t\t\tgg.selectAll('.tick text').attr('fill', panel.LowAxisColor);\r\n\t\t\t\t\tgg.selectAll('.tick line').attr('stroke', panel.LowAxisColor);\r\n\t\t\t\t\tgg.selectAll('path.domain').attr('stroke', panel.LowAxisColor);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (highSideMargin > 0) {\t\r\n\t\t\t\t\tlet gg = svg\r\n\t\t\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t\t.attr('transform', 'translate(' + (left + w - highSideMargin) + ', 0)')\r\n\t\t\t\t\t\t.classed('michaeldmoore-multistat-panel-valueaxis', true)\r\n\t\t\t\t\t\t.call(d3.axisRight(valueScale).tickSizeInner(5).tickSizeOuter(10).ticks(5));\r\n\t\t\t\t\tgg.selectAll('.tick text').attr('fill', panel.HighAxisColor);\r\n\t\t\t\t\tgg.selectAll('.tick line').attr('stroke', panel.HighAxisColor);\r\n\t\t\t\t\tgg.selectAll('path.domain').attr('stroke', panel.HighAxisColor);\r\n\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tlet groupNameOffset = this.panel.ShowGroupLabels ? Number(this.panel.GroupLabelFontSize.replace('%','')) * 0.15 : 0;\r\n\t\t\t\t\r\n\t\t\t\tif (this.groupedRows != null){\r\n\t\t\t\t\tlet gcols = (GroupCols <= 0 || GroupCols > this.groupedRows.length) ? this.groupedRows.length : GroupCols;\r\n\t\t\t\t\tlet dw = ((w + GroupGap) / gcols);\r\n\r\n\t\t\t\t\t// figure out the max data points in each column of groups...\r\n\t\t\t\t\tvar pointsPerCol = [];\r\n\t\t\t\t\tfor(let i = 0; i < gcols; i++)\r\n\t\t\t\t\t\tpointsPerCol.push(0);\r\n\t\t\t\t\tfor(let i = 0; i < this.groupedRows.length; i++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet cc = i % gcols;\r\n\t\t\t\t\t\tlet u = this.groupedRows[i].values.length;\r\n\t\t\t\t\t\tif (pointsPerCol[cc] < u)\r\n\t\t\t\t\t\t\tpointsPerCol[cc] = u;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet totalPoints = 0;\r\n\t\t\t\t\tfor(let i = 0; i < pointsPerCol.length; i++)\r\n\t\t\t\t\t\ttotalPoints += pointsPerCol[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar colOverheadWidth = this.panel.LowSideMargin + this.panel.HighSideMargin;\r\n\t\t\t\t\tvar colWidth = (w - (pointsPerCol.length * colOverheadWidth)) / totalPoints;\t\t\t\t\t\r\n\r\n\t\t\t\t\tlet numRows = Math.ceil(this.groupedRows.length / gcols);\r\n\t\t\t\t\tlet dh = h / numRows;\r\n\t\t\t\t\tlet hh = dh;\r\n\t\t\t\t\tfor (let rr = 0; rr < numRows; rr++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlet ww = 0;\r\n\t\t\t\t\t\tfor (let cc = 0; cc < gcols; cc++)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlet nn = pointsPerCol[cc];\r\n\r\n\t\t\t\t\t\t\tlet ii = cc + (rr * gcols);\r\n\t\t\t\t\t\t\tif (ii < this.groupedRows.length)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tplotGroupVertical(this.panel, this.svg, this.groupedRows[ii].values, nn, this.groupedRows[ii].key, groupNameOffset, \r\n\t\t\t\t\t\t\t\t\tww, dw - GroupGap, hh - dh, dh);\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tww += dw;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thh += dh;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tplotGroupVertical(this.panel, this.svg, this.rows, this.rows.length, '', 0, 0, w, 0, h);\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\r\n\t\t\t\t\t\t\r\n\t\t\tvar pulseHigh = function(svg) {\r\n\t\t\t\tvar highFlashRects = svg.selectAll(\"rect.michaeldmoore-multistat-panel-bar.highflash\");\r\n\t\t\t\t\r\n\t\t\t\tif ($.isNumeric(HighLimitBarFlashTimeout) && highFlashRects._groups.length > 0 && highFlashRects._groups[0].length > 0) {\r\n\t\t\t\t\thighFlashRects\r\n\t\t\t\t\t.transition()\r\n\t\t\t\t\t.on(\"start\", function highRepeat() {\r\n\t\t\t\t\t\td3.active(this)\r\n\t\t\t\t\t\t\t.style(\"fill\", HighLimitBarFlashColor)\r\n\t\t\t\t\t\t\t.duration(HighLimitBarFlashTimeout)\r\n\t\t\t\t\t\t\t.transition()\r\n\t\t\t\t\t\t\t.style(\"fill\", HighLimitBarColor)\r\n\t\t\t\t\t\t\t.duration(HighLimitBarFlashTimeout)\r\n\t\t\t\t\t\t\t.transition()\r\n\t\t\t\t\t\t\t.on(\"start\", highRepeat);\r\n\t\t\t\t\t  });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar pulseLow = function(svg) {\r\n\t\t\t\tvar lowFlashRects = svg.selectAll(\"rect.michaeldmoore-multistat-panel-bar.lowflash\");\r\n\t\t\t\tif ($.isNumeric(LowLimitBarFlashTimeout) && lowFlashRects._groups.length > 0 && lowFlashRects._groups[0].length > 0) {\r\n\t\t\t\t\tlowFlashRects\r\n\t\t\t\t\t.transition()\r\n\t\t\t\t\t.on(\"start\", function lowRepeat() {\r\n\t\t\t\t\t\td3.active(this)\r\n\t\t\t\t\t\t\t.style(\"fill\", LowLimitBarFlashColor)\r\n\t\t\t\t\t\t\t.duration(LowLimitBarFlashTimeout)\r\n\t\t\t\t\t\t\t.transition()\r\n\t\t\t\t\t\t\t.style(\"fill\", LowLimitBarColor)\r\n\t\t\t\t\t\t\t.duration(LowLimitBarFlashTimeout)\r\n\t\t\t\t\t\t\t.transition()\r\n\t\t\t\t\t\t\t.on(\"start\", lowRepeat);\r\n\t\t\t\t\t  });\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t\r\n\r\n\t\t\tpulseHigh(this.svg);\r\n\t\t\tpulseLow(this.svg);\r\n\t\t}\r\n\t\telse\r\n\t\t\tthis.displayStatusMessage(\"No data\");\r\n\t\t\t\t\t\t\r\n        this.ctrl.renderingCompleted();\r\n    }\r\n\r\n    onConfigChanged() {\r\n        this.refresh();\r\n    }\r\n\r\n    link(scope, elem, attrs, ctrl) {\r\n        this.ctrl = ctrl;\r\n        this.elem = elem.find('.panel-content');\r\n    }\r\n}\r\n\r\nMultistatPanelCtrl.templateUrl = 'module.html';\r\n\r\nexport { MultistatPanelCtrl as PanelCtrl };\r\n\r\n"]}